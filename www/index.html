<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
	<head>

		<!-- Basic Page Needs
		================================================== -->
		<meta charset="utf-8">
		<title>Inventory</title>
		<meta name="description" content="inventory for stuff on the Land">
		<meta name="author" content="freedom foundation">

		<!-- Mobile Specific Metas
		================================================== -->
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

		<!-- CSS
		================================================== -->
		<link rel="stylesheet" href="stylesheets/base.css">
		<link rel="stylesheet" href="stylesheets/skeleton.css">
		<link rel="stylesheet" href="stylesheets/layout.css">

		<!-- angularJS (manipulates some CSS..)
		================================================== -->
		<script type="text/javascript" src="js/angular.min.js"></script>

		<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

		<!-- Favicons
		================================================== -->
		<link rel="shortcut icon" href="images/favicon.ico">
		<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
		<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	</head>




	<!-- START OF THE BODY AND THE ITEM APP -->
	<body ng-app="itemApp">
		<div class="container" ng-controller="itemCtrl" id="itemCtrl">
			<div class="sixteen columns">
				<div class="row remove-bottom">
					<div id="email" class="four columns offset-by-eleven alpha">
						<!-- Required -->
						<input id='req-email-input' ng-model='email' ng-change='reqCheck()' class ="remove-bottom add-top" type='text' placeholder='email' />
					</div>
					<div class = "one column omega">
						<button class ="remove-bottom add-top" ng-click='setEmailCookie()'>save</button>
					</div>
				</div>
				<div class="row">
					<h1 class="remove-bottom remove-top">Inventory</h1>
					<h5>add and update items at the land</h5>
				</div>
				<div class="row half-bottom">
					<h6 class='help' ng-show="showAddItemHelp">...please fill out all<span class='help-req'>required fields</span></h6>
					<button ng-click="addItemClick()" ng-hide="showForm">add item</button>
				</div>

				<!-- ADD A FORM  -->
				<div ng-show="showForm" class="row">
					<div class="six columns alpha">
						<form action="">

							<!-- Required -->
							<label id='req-name-label' for="req-name-input">name</label>
							<input type="text" id="req-name-input" ng-model="item.name" ng-change='reqCheck()' />

							<fieldset>
							    <label for="have">
							    	<input type="radio" name="need" id="have" value="have" ng-model="item.need" />
							    	<span>have</span>
							    </label>
							 
							    <label for="want">
							    	<input type="radio" name="need" id="want" ng-model="item.need" value="want" />
							    	<span>want</span>
							    </label>
						    </fieldset>

							<label for="inputDesc">description</label>
							<textarea id="inputDesc" ng-model="item.description"></textarea>

							<label ng-hide="showOtherLocationField()" for="inputLoc">location</label>
							<select ng-hide="showOtherLocationField()" ng-model="item.loc" id="inputLoc" ng-options="l for l in locations">
								<option></option>
							</select>

							<label ng-show="showOtherLocationField()" for="inputLocOther">other location</label>
							<input ng-show="showOtherLocationField()" type="text" id="inputLocOther" placeholder="enter location" ng-model="item.other">

							<label for="inputQuantity">quantity</label>
							<input id='inputQuantity' type="text" ng-model="item.quantity" />

							<label for="quasireq-ImageUrl">image URL</label>
							<input type="text" id="quasireq-ImageUrl" ng-model="item.imageURL" ng-change='reqCheck()' />

							<fieldset>
								<label for="receiptTrigger">
									<input type='checkbox' ng-model='showReceiptField' value="false" />
									<span class="bold">receipt?</span>
								</label>
							</fieldset>

							<label for="inputPrice'" ng-show="showReceiptField">price</label>
							<input type="text" id="inputPrice'" ng-model="item.price" ng-show="showReceiptField"/>

							<label for="quasireq-receiptUrl" ng-show="showReceiptField">receipt URL</label>
							<input type="text" id="quasireq-receiptUrl" ng-model="item.receiptURL" ng-change='reqCheck()' ng-show="showReceiptField" />

							<!-- these fields are disabled via reqCheck() unless required fields meet criteria -->
							<button id='addButton' type="submit" ng-click="addItem()" ng-hide="showUpdateButton">add</button>
							<button id= 'updateButton' type="submit" ng-click='updateItem()' ng-show='showUpdateButton'>update</button>
							<button id= 'cancelButton' ng-click="cancelForm()">cancel</button>

						</form>
					</div>
				</div> <!-- end add item form -->

				<!-- labels - figure this out 
				<div id='column-labels'>
					<div class="row remove-all">
						<div class="two columns alpha">
							<p class='remove-top half-bottom'>img</p>
						</div>
						<div class="three columns">
							<p class='remove-top half-bottom'>name</p>
						</div>
						<div class="five columns">
							<p class='remove-top half-bottom'>desc</p>
						</div>
						<div class="four columns">
							<p class='remove-top half-bottom'>comment</p>
						</div>
						<div class="one column">
							<p class='remove-top half-bottom'>opt</p>
						</div>
						<div class="one column omega">
							<p class='remove-top half-bottom'>del</p>
						</div>
					</div>
				</div>
				-->
				
				<!-- SHOW ALL THE ITEMS!! -->
				<div ng-repeat="loopitem in items">
					<div class="row item-row alive" id="{{loopitem.uid}}" ng-class="{selected:selected[loopitem.uid]}">
						<div class="one column alpha">
							<h4 class="pad-left"><input type='checkbox' ng-hide='{{loopitem.lock}}' ng-click='selectItem(loopitem)' ng-model='selected[loopitem.uid]' /><img class='pad-top' ng-show='{{loopitem.lock}}' src="images/lock.png"/></h4>
						</div>
						<div class="two column">
							<a href='/images/item{{loopitem.uid}}/itemImage.jpg'><img id='image-{{loopitem.uid}}' class='pad-left' ng-src="{{loopitem.thumb}}" /></a>
						</div>
						<div class="three columns" ng-click='selectItem(loopitem)'>
							<h4 class="pad-left">{{loopitem.name}}</h4>
						</div>
						<div class="five columns" ng-click='selectItem(loopitem)'>
							<p class="pad-left">{{loopitem.description}}</p>
						</div>
						<div class="two columns" ng-click='selectItem(loopitem)'>
							<p class="pad-left">x {{loopitem.quantity}}</p>
						</div>
						<div class="one columns">
							<a class='item-link' ng-click=''>ask</a> <!-- push comments to the item...? -->
							<a class='item-link' ng-click='showHistory(loopitem)'>old</a> 
							<a class='item-link'><span ng-show='{{loopitem.flag}}' ng-click='pushToItem(loopitem, "flag", false)'><img src='images/flag.gif'/></span><span ng-hide='{{loopitem.flag}}' ng-click='pushToItem(loopitem, "flag", true)'>flag</span></a>
						</div>
						<div class="two columns omega">
							<a class="pad-left" ng-click="removeItem(loopitem)"><img class="pad-top" id='trash{{loopitem.uid}}' src="images/toast.png" /></a>
							<a class='pad-left' ng-click='editItem(loopitem)' ng-show="selected[loopitem.uid]"><img class="pad-top" src="images/edit.png" /></a>
						</div>
					</div>
					<div class="row remove-all" ng-show='showItemHistory(loopitem.uid)'>
						<button ng-click='hideHistory(loopitem.uid)'>hide</button>
						<div class="item-history remove-all" id='history-{{loopitem.uid}}'></div>
					</div>
					<div class='row remove-all' id='alert-{{loopitem.uid}}' ng-show='{{loopitem.lock}}'>
						<p class='alert-lock'>{{loopitem.name}} is waiting on owner response</p>
					</div>
					
				</div> <!-- end item repeat -->

				<div ng-repeat='deleted in deletedItems'>
					
					<div class="row item-row graveyard">
						<div class="two columns alpha">
							<img class="pad-left-more" src='images/dead.png' />
						</div>
						<div class="fourteen columns omega">
							<h4 class="pad-left">{{deleted.data.name}}</h4>
						</div>
					</div>

				</div> <!-- end deleted item repeat -->

			</div> <!-- end 16 col div -->
		</div><!-- end item control container -->


		<!-- End Document
		================================================== -->

		<!-- Javascript
		================================================== -->
		<script src="js/jquery.min.js"></script>
		<script src="js/jquery.cookie.js"></script>
		<script src="js/item.js"></script>
	</body>
</html>